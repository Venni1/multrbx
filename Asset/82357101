<roblox xmlns:xmime="http://www.w3.org/2005/05/xmlmime" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.mulrbx.com/roblox.xsd" version="4">
	<Meta name="ExplicitAutoJoints">true</Meta>
	<External>null</External>
	<External>nil</External>
	<Item class="Tool" referent="RBX260A24ABD92847008972F2CE93531380">
		<Properties>
			<bool name="CanBeDropped">true</bool>
			<bool name="Enabled">true</bool>
			<CoordinateFrame name="Grip">
				<X>0</X>
				<Y>0</Y>
				<Z>0.25</Z>
				<R00>1</R00>
				<R01>0</R01>
				<R02>0</R02>
				<R10>0</R10>
				<R11>1</R11>
				<R12>0</R12>
				<R20>0</R20>
				<R21>0</R21>
				<R22>1</R22>
			</CoordinateFrame>
			<bool name="ManualActivationOnly">false</bool>
			<string name="Name">PortableJustice</string>
			<bool name="RequiresHandle">true</bool>
			<BinaryString name="Tags"></BinaryString>
			<Content name="TextureId"><url>http://www.mulrbx.com/asset/?id=82332715</url></Content>
			<string name="ToolTip">PortaCell</string>
		</Properties>
		<Item class="Part" referent="RBXA50FF834A793458BBEA868D6E9B08F00">
			<Properties>
				<bool name="Anchored">false</bool>
				<float name="BackParamA">-0.5</float>
				<float name="BackParamB">0.5</float>
				<token name="BackSurface">0</token>
				<token name="BackSurfaceInput">0</token>
				<float name="BottomParamA">-0.5</float>
				<float name="BottomParamB">0.5</float>
				<token name="BottomSurface">4</token>
				<token name="BottomSurfaceInput">0</token>
				<CoordinateFrame name="CFrame">
					<X>8.94069672e-08</X>
					<Y>-0.099999994</Y>
					<Z>0.400000006</Z>
					<R00>0</R00>
					<R01>0</R01>
					<R02>1</R02>
					<R10>0</R10>
					<R11>1</R11>
					<R12>-0</R12>
					<R20>-1</R20>
					<R21>0</R21>
					<R22>0</R22>
				</CoordinateFrame>
				<bool name="CanCollide">true</bool>
				<bool name="CastShadow">true</bool>
				<int name="CollisionGroupId">0</int>
				<Color3uint8 name="Color3uint8">4288914085</Color3uint8>
				<PhysicalProperties name="CustomPhysicalProperties">
					<CustomPhysics>false</CustomPhysics>
				</PhysicalProperties>
				<float name="FrontParamA">-0.5</float>
				<float name="FrontParamB">0.5</float>
				<token name="FrontSurface">0</token>
				<token name="FrontSurfaceInput">0</token>
				<float name="LeftParamA">-0.5</float>
				<float name="LeftParamB">0.5</float>
				<token name="LeftSurface">0</token>
				<token name="LeftSurfaceInput">0</token>
				<bool name="Locked">true</bool>
				<bool name="Massless">false</bool>
				<token name="Material">256</token>
				<string name="Name">Handle</string>
				<float name="Reflectance">0</float>
				<float name="RightParamA">-0.5</float>
				<float name="RightParamB">0.5</float>
				<token name="RightSurface">0</token>
				<token name="RightSurfaceInput">0</token>
				<int name="RootPriority">0</int>
				<Vector3 name="RotVelocity">
					<X>0</X>
					<Y>0</Y>
					<Z>0</Z>
				</Vector3>
				<BinaryString name="Tags"></BinaryString>
				<float name="TopParamA">-0.5</float>
				<float name="TopParamB">0.5</float>
				<token name="TopSurface">3</token>
				<token name="TopSurfaceInput">0</token>
				<float name="Transparency">0</float>
				<Vector3 name="Velocity">
					<X>0</X>
					<Y>0</Y>
					<Z>0</Z>
				</Vector3>
				<token name="formFactorRaw">3</token>
				<token name="shape">1</token>
				<Vector3 name="size">
					<X>0.869999826</X>
					<Y>1</Y>
					<Z>0.819999754</Z>
				</Vector3>
			</Properties>
			<Item class="SpecialMesh" referent="RBX933654CC317747F19B603C1E78FB51AD">
				<Properties>
					<token name="LODX">2</token>
					<token name="LODY">2</token>
					<Content name="MeshId"><url>http://www.mulrbx.com/asset/?id=82332649</url></Content>
					<token name="MeshType">5</token>
					<string name="Name">Mesh</string>
					<Vector3 name="Offset">
						<X>0</X>
						<Y>0</Y>
						<Z>0</Z>
					</Vector3>
					<Vector3 name="Scale">
						<X>0.200000003</X>
						<Y>0.200000003</Y>
						<Z>0.200000003</Z>
					</Vector3>
					<BinaryString name="Tags"></BinaryString>
					<Content name="TextureId"><url>http://www.mulrbx.com/asset/?id=82332693</url></Content>
					<Vector3 name="VertexColor">
						<X>1</X>
						<Y>1</Y>
						<Z>1</Z>
					</Vector3>
				</Properties>
			</Item>
		</Item>
		<Item class="LocalScript" referent="RBXAE2B88A303B64408A892B44869ED02E0">
			<Properties>
				<bool name="Disabled">false</bool>
				<Content name="LinkedSource"><null></null></Content>
				<string name="Name">Client</string>
				<string name="ScriptGuid">{734DF679-AE08-4302-B2FD-52F02110883F}</string>
				<ProtectedString name="Source"><![CDATA[local function waitForChild(parent, child)
	while parent:FindFirstChild(child) == nil do 
		wait()
	end 
	return parent[child]
end 


local Tool = script.Parent 
local Prison = Tool.Handle

local vCharacter
local vTorso
local vHumanoid

local vPlayer
local PlayerGui

local Help_Gui 
local Help_Frame
local Help_TextLabel 

local LockSound 

local Prison_Anim 

local Mouse 

Tool.Enabled = true

local function onActivated()
	if not Tool.Enabled then
		return 
	end 

	Tool.Enabled = false 
	--print(Mouse)
	
	if Mouse and Mouse.Target then
		local ePart = Mouse.Target 
		local distance = (vTorso.Position - ePart.Position).magnitude
		if distance < 15 then 			
			if Mouse.Target.Parent then 
				Prison_Anim = vHumanoid:LoadAnimation(Tool:FindFirstChild("PrisonAnim".. vHumanoid.RigType.Name))
				if Prison_Anim then Prison_Anim:Play() end 
				wait(0.25)
				local enemyCharacter = Mouse.Target.Parent 
				local enemyHumanoid = enemyCharacter:FindFirstChildOfClass("Humanoid") 
				if enemyHumanoid and not enemyCharacter:FindFirstChild("PrisonScript") then 
					--Send Remote to Server
					local MouseClick = Tool:FindFirstChildOfClass("RemoteEvent")
					if MouseClick then
						MouseClick:FireServer(enemyCharacter)
					end

				end 
			end
		else 
			spawn(function() 
				Help_TextLabel.Text = "Too far!" 
				wait(1.5)
				Help_TextLabel.Text = "Trap others with your portacell!" 
			end) 
		end 
	end  

	wait(2.0)
	Prison.Transparency = 0.0
	Tool.Enabled = true 
end 

local function onEquipped(mouse)
	vCharacter = Tool.Parent 
	vTorso = vCharacter:FindFirstChild("HumanoidRootPart")
	vHumanoid = vCharacter:FindFirstChildOfClass("Humanoid")
	vPlayer = game.Players:GetPlayerFromCharacter(vCharacter) 
	PlayerGui = waitForChild(vPlayer, "PlayerGui")
	Mouse = mouse 

	if not Help_Gui then 
		Help_Gui = Instance.new("ScreenGui")
		Help_Gui.Parent = PlayerGui 
		Help_Gui.Name = "HelpGui"
 
		Help_Frame = Instance.new("Frame")
		Help_Frame.Name = "Help Frame"
		Help_Frame.Size = UDim2.new(0, 250, 0, 50) 
		Help_Frame.Position = UDim2.new(0.5, -125, 1, -130)
		Help_Frame.Style = Enum.FrameStyle.RobloxSquare
		Help_Frame.Parent = Help_Gui 
		Help_Frame.BackgroundTransparency = 1.0  		

		Help_TextLabel = Instance.new("TextLabel") 
		Help_TextLabel.Name = "Help Text" 
		Help_TextLabel.Size = UDim2.new(1, 0, 1, 0) 
		Help_TextLabel.Position = UDim2.new(0, 0, 0, 0)
		Help_TextLabel.Parent = Help_Frame 
		Help_TextLabel.BackgroundTransparency = 1.0 
		Help_TextLabel.Text = "Trap others with your portacell!" 
		Help_TextLabel.TextColor3 = Color3.new(1, 1, 1)
		Help_TextLabel.FontSize = Enum.FontSize.Size12
	else 
		Help_Gui.Parent = PlayerGui 
	end 
end 

local function onUnequipped()
	if LockSound then LockSound:Play() end
	if Help_Gui then 
		Help_Gui.Parent = nil 
	end 
	if Prison_Anim then 
		Prison_Anim:Stop() 
	end 
end 

Tool.Activated:Connect(onActivated)
Tool.Equipped:Connect(onEquipped) 
Tool.Unequipped:Connect(onUnequipped)]]></ProtectedString>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
		</Item>
		<Item class="Animation" referent="RBXB72F1E604FAB4D638EBADE6A98B06573">
			<Properties>
				<Content name="AnimationId"><url>http://www.mulrbx.com/Asset?ID=49456429</url></Content>
				<string name="Name">PrisonAnimR6</string>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
		</Item>
		<Item class="Camera" referent="RBXDEBA901DA6AE4BC292D329BF1AD4FC56">
			<Properties>
				<CoordinateFrame name="CFrame">
					<X>-1.33287942</X>
					<Y>0.237794176</Y>
					<Z>1.34024358</Z>
					<R00>0.576432586</R00>
					<R01>0.165706947</R01>
					<R02>-0.800166667</R02>
					<R10>7.4505806e-09</R10>
					<R11>0.979222715</R11>
					<R12>0.202787757</R12>
					<R20>0.817144752</R20>
					<R21>-0.116893478</R21>
					<R22>0.564455807</R22>
				</CoordinateFrame>
				<Ref name="CameraSubject">null</Ref>
				<token name="CameraType">0</token>
				<float name="FieldOfView">70</float>
				<CoordinateFrame name="Focus">
					<X>8.94069672e-08</X>
					<Y>-0.100000009</Y>
					<Z>0.400000006</Z>
					<R00>1</R00>
					<R01>0</R01>
					<R02>0</R02>
					<R10>0</R10>
					<R11>1</R11>
					<R12>0</R12>
					<R20>0</R20>
					<R21>0</R21>
					<R22>1</R22>
				</CoordinateFrame>
				<bool name="HeadLocked">true</bool>
				<float name="HeadScale">1</float>
				<string name="Name">ThumbnailCamera</string>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
		</Item>
		<Item class="RemoteEvent" referent="RBX5E16B49A0BB645FBA4591EF2B2692F95">
			<Properties>
				<string name="Name">MouseClick</string>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
		</Item>
		<Item class="Script" referent="RBX46C80F63691D496DA9BDA2F2BFB970D5">
			<Properties>
				<bool name="Disabled">false</bool>
				<Content name="LinkedSource"><null></null></Content>
				<string name="Name">Server</string>
				<string name="ScriptGuid">{39732813-5835-416A-A87B-4B287391455E}</string>
				<ProtectedString name="Source"><![CDATA[function Create(ty)
	return function(data)
		local obj = Instance.new(ty)
		for k, v in pairs(data) do
			if type(k) == 'number' then
				v.Parent = obj
			else
				obj[k] = v
			end
		end
		return obj
	end
end

local Tool = script.Parent

local Handle = Tool:WaitForChild("Handle",10)

local MouseClick = Tool:WaitForChild("MouseClick",10)

local PrisonScript = script:WaitForChild("CellScript",10)
local DisableBackpack = script:WaitForChild("DisableBackpack",10)

local Players = (game:FindService("Players") or game:GetService("Players"))
local Debris = (game:FindService("Debris") or game:GetService("Debris"))

local Services = {
	Players = (game:FindService("Players") or game:GetService("Players")),
	Debris = (game:FindService("Debris") or game:GetService("Debris")),
	ServerScriptService = (game:FindService("ServerScriptService") or game:GetService("ServerScriptService"))
}

local function IsJailed(Hum) -- Quick check to see if they're not jailed
	local Children = Services.ServerScriptService:GetChildren()
	for i=1, #Children do
		if Children[i]:IsA("Script") and Children[i].Name == "CellScript" and Children[i]:FindFirstChild("Target") and Children[i]:FindFirstChild("Target").Value == Hum.Parent then
			return true
		end
	end
	return false
end


MouseClick.OnServerEvent:Connect(function(Player,SelectedTargetCharacter)
	--print("Activated")
	if not Player or not SelectedTargetCharacter then return end
	local Torso = (SelectedTargetCharacter:FindFirstChild("HumanoidRootPart") or SelectedTargetCharacter:FindFirstChild("Torso"))
	local Humanoid,FF = SelectedTargetCharacter:FindFirstChildOfClass("Humanoid"),SelectedTargetCharacter:FindFirstChildOfClass("ForceField")
	local UserTorso = (Player.Character:FindFirstChild("HumanoidRootPart") or Player.Character:FindFirstChild("Torso"))
	
	if not UserTorso or FF then return end
	
	local Distance = (Torso.CFrame.p-UserTorso.CFrame.p).magnitude -- Make sure it's legit
	
	if Distance > 15 then return end
	
	if Torso and Humanoid and not SelectedTargetCharacter:FindFirstChild("CellScript") and not IsJailed(Humanoid) then
		local pScript = PrisonScript:Clone()
		Create("ObjectValue"){
			Name = "Target",
			Value = SelectedTargetCharacter,
			Parent = pScript,
		}
		pScript.Parent = Services.ServerScriptService
		pScript.Disabled = false 
		
		if Players:GetPlayerFromCharacter(SelectedTargetCharacter) then
			local DisableScript = DisableBackpack:Clone()
			DisableScript.Parent = SelectedTargetCharacter
			DisableScript.Disabled = false
			Debris:AddItem(DisableScript,10)
		end
	end
end)]]></ProtectedString>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
			<Item class="Script" referent="RBX56D36876E4BB42D385DD9815EFEF0741">
				<Properties>
					<bool name="Disabled">true</bool>
					<Content name="LinkedSource"><null></null></Content>
					<string name="Name">CellScript</string>
					<string name="ScriptGuid">{9DF3F87E-D22C-4E0A-A7D3-512BF243D0B1}</string>
					<ProtectedString name="Source"><![CDATA[



-----------------
local Target = script:FindFirstChild("Target")

if not Target then script:Destroy() end

Target = Target.Value

local Humanoid = Target:FindFirstChildOfClass("Humanoid")
Humanoid:UnequipTools()

local Stop = false
coroutine.wrap(function()
	repeat
		Humanoid.JumpPower = 0
		Humanoid.WalkSpeed = 0
		game:GetService("RunService").Heartbeat:Wait()
	until Stop
end)()

local function waitForChild(parent, instance)
	while parent:FindFirstChild(instance) == nil do 
		wait()
	end 
	return parent[instance]
end  

local vCharacter = script:FindFirstChild("Target")
if not vCharacter then script:Destroy() end

vCharacter = vCharacter.Value
 
local vTorso = waitForChild(vCharacter, "HumanoidRootPart")
local vHumanoid = vCharacter:FindFirstChildOfClass("Humanoid")

if not vHumanoid then script:Destroy() end
vTorso.Anchored = true 


local Prison_Part = Instance.new("Part")
Prison_Part.Shape = "Block"
Prison_Part.Size = Vector3.new(5, 5, 5)
Prison_Part.FormFactor = 3
Prison_Part.CFrame = vTorso.CFrame 
Prison_Part.Parent = vCharacter 

local Prison_Mesh = Instance.new("SpecialMesh")
Prison_Mesh.MeshId = "http://www.mulrbx.com/asset/?id=82332649"
Prison_Mesh.TextureId = "http://www.mulrbx.com/asset/?id=82332693"
Prison_Mesh.Parent = Prison_Part 
Prison_Mesh.Scale = Vector3.new(1, 1, 1)

local Prison_Weld = Instance.new("Weld") 
Prison_Weld.Part0 = vTorso 
Prison_Weld.Part1 = Prison_Part 
Prison_Weld.Name = "PrisonWeld"
Prison_Weld.Parent = Prison_Part

local Services = {
	Players = (game:FindService("Players") or game:GetService("Players")),
	Debris = (game:FindService("Debris") or game:GetService("Debris")),
}


if Services.Players:GetPlayerFromCharacter(Target) then
	local Disable = script:WaitForChild("DisableBackpack")
	Disable.Parent = Services.Players:GetPlayerFromCharacter(Target):WaitForChild("Backpack")
	Disable.Disabled = false
	Services.Debris:AddItem(Disable,1)
	Services.Players:GetPlayerFromCharacter(Target).CharacterRemoving:Connect(function(Char)--keeps people from a hidden inventory
		local Enable = script:WaitForChild("EnableBackpack")
		Enable.Parent = Services.Players:GetPlayerFromCharacter(Target):WaitForChild("Backpack")
		Enable.Disabled = false
		Services.Debris:AddItem(Enable,1)
	end)
end

wait(7.5)
Stop = false
if Services.Players:GetPlayerFromCharacter(Target) then	
	local Enable = script:WaitForChild("EnableBackpack")
	Enable.Parent = Services.Players:GetPlayerFromCharacter(Target):WaitForChild("Backpack")
	Enable.Disabled = false
	Services.Debris:AddItem(Enable,1)
end

Humanoid.JumpPower = 50
Humanoid.WalkSpeed = 16
if Prison_Part then
	Prison_Part:Destroy()
end
wait(2)

script:Destroy()]]></ProtectedString>
					<BinaryString name="Tags"></BinaryString>
				</Properties>
			</Item>
			<Item class="LocalScript" referent="RBX7A024195732C4B1891E484CAE47592B6">
				<Properties>
					<bool name="Disabled">true</bool>
					<Content name="LinkedSource"><null></null></Content>
					<string name="Name">DisableBackpack</string>
					<string name="ScriptGuid">{E33E9C9B-4933-43B5-8EEE-0CA0D9337A9B}</string>
					<ProtectedString name="Source"><![CDATA[--Much efficient way to hide the backpack without causing lag

local StarterGui = game:GetService("StarterGui")

StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, false)]]></ProtectedString>
					<BinaryString name="Tags"></BinaryString>
				</Properties>
			</Item>
			<Item class="LocalScript" referent="RBX4184A518A19D4BFE957CA9DDBF7F07C7">
				<Properties>
					<bool name="Disabled">true</bool>
					<Content name="LinkedSource"><null></null></Content>
					<string name="Name">EnableBackpack</string>
					<string name="ScriptGuid">{9B94FB7C-E99D-418B-BC97-B2D8085755F4}</string>
					<ProtectedString name="Source"><![CDATA[--Much efficient way to hide the backpack without causing lag

local StarterGui = game:GetService("StarterGui")

StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, true)]]></ProtectedString>
					<BinaryString name="Tags"></BinaryString>
				</Properties>
			</Item>
		</Item>
		<Item class="Animation" referent="RBX05E67F2F921542558D24B1CE2D68A04F">
			<Properties>
				<Content name="AnimationId"><url>rbxassetid://857260048</url></Content>
				<string name="Name">PrisonAnimR15</string>
				<BinaryString name="Tags"></BinaryString>
			</Properties>
		</Item>
	</Item>
</roblox>